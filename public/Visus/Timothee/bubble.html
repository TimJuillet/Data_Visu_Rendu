<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #map {
            width: 100vw;
            height: calc(100vh - 40px);
            margin-top: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .country {
            fill: #b8b8b8;
            stroke: white;
            stroke-width: 0.5;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    <script>
        const margin = { top: 20, right: 20, bottom: 20, left: 20 };
        const width = window.innerWidth - margin.left - margin.right;
        const height = window.innerHeight - margin.top - margin.bottom - 40;

        const svg = d3.select('#map')
            .append('svg')
            .attr('width', width)
            .attr('height', height)
            .style('display', 'block')
            .style('margin', 'auto');

        // Réduction du facteur d'échelle
        const projection = d3.geoMercator()
            .scale(Math.min(width, height * 2) / 6.5) // Réduction significative du zoom
            .center([0, 20])
            .translate([width / 2, height / 2]);

        const path = d3.geoPath().projection(projection);

        function resize() {
            const newWidth = window.innerWidth - margin.left - margin.right;
            const newHeight = window.innerHeight - margin.top - margin.bottom - 40;

            svg.attr('width', newWidth)
               .attr('height', newHeight);

            projection
                .scale(Math.min(newWidth, newHeight * 2) / 6.5)
                .translate([newWidth / 2, newHeight / 2]);

            svg.selectAll('path')
               .attr('d', path);
        }

        window.addEventListener('resize', resize);

        fetch('https://raw.githubusercontent.com/janasayantan/datageojson/master/world.json')
            .then(response => response.json())
            .then(data => {
                svg.selectAll('path')
                    .data(data.features)
                    .enter()
                    .append('path')
                    .attr('d', path)
                    .attr('class', 'country');
            })
            .catch(error => {
                console.error('Erreur de chargement:', error);
                document.getElementById('map').innerHTML = 'Erreur de chargement de la carte';
            });
    </script>
</body>
</html>